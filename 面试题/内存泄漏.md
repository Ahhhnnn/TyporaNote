# 内存溢出 & 内存泄漏

## 内存溢出

简单地说内存溢出就是指**程序运行过程中申请的内存大于系统能够提供的内存，导致无法申请到足够的内存**，于是就发生了内存溢出。

## 内存泄漏

内存泄漏指程序运行过程中**分配内存给临时变量，用完之后却没有被GC回收，始终占用着内存**，既不能被使用也不能分配给其他程序，于是就发生了内存泄漏。该对象已经不被使用了，但是不能被GC回收，导致内存泄漏



## OOM heap space 堆溢出

一般是对象创建过多，GCROOTS可达，认为不能被回收，导致内存被沾满，从而抛出OOM溢出



## OOM metaspace

MetaSpace 中存储了class 名称, 字段, 方法, 字节码, 常量池等，OOM metaspace的原因是由于 **class 数量太多或者体积太大**。

## OOM Perm Gen 持久代溢出

jvm通过持久带实现了java虚拟机规范中的方法区，而运行时常量池就是保存在方法区中的，因此发生这种溢出可能是运行时常量池溢出，或是由于程序中使用了大量的jar或class，使得方法区中保存的class对象没有被及时回收或者class信息占用的内存超过了配置的大小。

**`-XX:PermSize=128M -XX:MaxPermSize=256M`** 设置持久代大小



