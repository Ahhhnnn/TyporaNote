## 替换空格

请实现一个函数，将一个字符串中的每个空格替换成 “%20” 。例如，当字符串为 We Are Happy 。则经过替换之后的字符串为  We%20Are%20Happy 。

## Java

java有内置方法**str.toString().replaceAll("\s", "%20");**进行实现

源码

```java
return Pattern.compile(regex).matcher(this).replaceAll(replacement);

public String replaceAll(String replacement) {
        reset();
        boolean result = find();
        if (result) {
            StringBuilder sb = new StringBuilder();
            do {
                appendReplacement(sb, replacement);
                result = find();
            } while (result);
            appendTail(sb);
            return sb.toString();
        }
        return text.toString();
    }
```

**源码的实现使用了 正则表达式，并且同时实现代码里面不停的创建与销毁对象，性能方面很不理想。**

**对于此题，我们只需要去寻找可以被替换的部分，然后把不被替换的部分和替换者一个个连接起来就行了，远远不需要这么复杂的操作。**



## Solution

开辟一个新的数组，数组长度为**字符串长度+替换子串的长度*需要替换的个数**

如果没有遇到需要替换的字符则原样写入新数组，如果遇到需要替换的字符，则在新数组中写入替换后的字符。

**自己的实现**

```java
public static void main(String[] args) {
        String srcStr ="We Are Happy";
        String replaceStr = getReplaceStr(srcStr, 'e');
        System.out.println(replaceStr);
    }

    private static String getReplaceStr (String srcStr,char replaceMent){
        char[] srcStrChars = srcStr.toCharArray();
        int needReplaceCount = 0;
        int noNeedReolaceCount = 0;
        for (char aChar : srcStrChars) {
            if(aChar == replaceMent){
                needReplaceCount++;
            }else {
                noNeedReolaceCount++;
            }
        }
        char[] newStr = new char[needReplaceCount*3 + noNeedReolaceCount];
        int newStrIndex = newStr.length-1;
        int srcStrIndex = srcStr.length()-1;
        while (srcStrIndex>=0){
            if(srcStrChars[srcStrIndex]!=replaceMent){
                newStr[newStrIndex--]=srcStrChars[srcStrIndex];
            }else {
                newStr[newStrIndex--]='0';
                newStr[newStrIndex--]='2';
                newStr[newStrIndex--]='%';
            }
            srcStrIndex--;
        }
        return new String(newStr);
    }
```

## 参考实现

```
//解题地址：https://www.nowcoder.com/ta/coding-interviews?query=&asc=true&order=&page=1
public class Solution {
    public String replaceSpace(StringBuffer str) {
       String str1 = str.toString();
        if(str1.equals(""))
            return str1;
        char [] strArray = str1.toCharArray();
        int i =0;
        int lengthSpace = 0;
        while(i < strArray.length){
           if(strArray[i] == ' ')
               lengthSpace++;
           i++;
       }
        int newStrLength = strArray.length + lengthSpace*2;
        char [] newStr = new char[newStrLength];
        int j = newStrLength-1;
        i = strArray.length - 1;
        while(i >= 0){
            if(strArray[i] !=  ' '){
             newStr[j--] = strArray[i--];
           }else{
               newStr[j--] = '0';
               newStr[j--] = '2';
               newStr[j--] = '%';
               i--;
           }
       }
       return new String(newStr);
    }
}
```

